FROM metadatacenter/cedar-microservice

ENV CEDAR_SERVER_NAME=resource

ENV CEDAR_RESOURCE_HTTP_PORT=9007
ENV CEDAR_RESOURCE_ADMIN_PORT=9107
ENV CEDAR_RESOURCE_STOP_PORT=9207

ENV CEDAR_WORKSPACE_HTTP_PORT=9008
ENV CEDAR_TEMPLATE_HTTP_PORT=9001
ENV CEDAR_USER_HTTP_PORT=9005

ENV LOGDIR=${CEDAR_HOME}/log/cedar-${CEDAR_SERVER_NAME}-server/
RUN mkdir -p ${LOGDIR}
VOLUME ${LOGDIR}

EXPOSE ${CEDAR_RESOURCE_HTTP_PORT} ${CEDAR_RESOURCE_ADMIN_PORT} ${CEDAR_RESOURCE_STOP_PORT}

RUN ${CEDAR_HOME}/install_deps.sh